(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{108:function(e,t,n){e.exports={overlay:"ModalOverlay_overlay__lrtDa"}},110:function(e,t,n){e.exports={order_list:"OrderList_order_list__3y85u"}},111:function(e,t,n){e.exports={wrapper:"not-found_wrapper__AsGvC"}},120:function(e,t,n){},121:function(e,t,n){},17:function(e,t,n){e.exports={wrapper:"feed_wrapper__1AZ_g",feed_wrapper:"feed_feed_wrapper__-7k-b",feed_inner:"feed_feed_inner__2iAV3",feed_order_status:"feed_feed_order_status__1A2px",feed_order_status_type:"feed_feed_order_status_type__1OgGJ",feed_order_cyan_colored:"feed_feed_order_cyan_colored__1fJLq",feed_order_status_type_list:"feed_feed_order_status_type_list__2rfBO",text_shadow:"feed_text_shadow__3F9hu"}},216:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(38),s=n.n(c),i=(n(120),n(121),n(13)),o=n(34),d=function(){return Object(o.b)()},l=o.c,u=n(6),m=n.n(u),j=n(15),p=n(11),b=n(113),_=0,x={bun:null,components:[],qty:{}},f=Object(p.c)({name:"burgerConstructor",initialState:x,reducers:{addIngredient:function(e,t){var n=t.payload.ingredient;"bun"===n.type?(e.bun&&(e.qty[e.bun._id]=0),e.bun=n,e.qty[n._id]=2):(e.components.push({id:_++,ingredient:n}),e.qty[n._id]?e.qty[n._id]=++e.qty[n._id]:e.qty[n._id]=1)},removeIngredient:function(e,t){var n,r=t.payload;e.components=e.components.filter((function(t,a){return a===r.index&&(n=t.ingredient,e.qty[n._id]=--e.qty[n._id]),a!==r.index}))},updateComponentsSort:function(e,t){var n=t.payload,r=n.fromIndex,a=n.toIndex,c=Object(b.a)(e.components),s=c[r];c.splice(r,1),c.splice(a,0,s),e.components=c},reset:function(){return x}}}),h=f.actions,O=h.addIngredient,g=h.removeIngredient,v=h.updateComponentsSort,y=h.reset,N=f.reducer,w=Object(p.b)("burgerIngredients/getData",function(){var e=Object(j.a)(m.a.mark((function e(t,n){var r,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=n.dispatch)(I()),e.next=4,fetch(t);case 4:return a=e.sent,e.next=7,a.json();case 7:(c=e.sent).success?r(S({data:c.data})):r(T());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),C=Object(p.c)({name:"burgerIngredients",initialState:{data:[],dataRequest:!1,dataFailed:!1,currentTab:"buns"},reducers:{request:function(e){e.dataRequest=!0,e.dataFailed=!1},success:function(e,t){e.dataRequest=!1,e.data=t.payload.data},failed:function(e){e.dataRequest=!1,e.dataFailed=!0},updateCurrentTab:function(e,t){var n=t.payload;e.currentTab=n.tab}},extraReducers:function(e){e.addCase(w.rejected,(function(e,t){console.log(t.error),T()}))}}),k=C.actions,I=k.request,S=k.success,T=k.failed,q=k.updateCurrentTab,B=C.reducer,E=n(29),D=n(227),A=n(221),F=n(228),R=n(224);function U(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[]\\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function P(e,t,n){var r=(n=n||{}).expires;if("number"==typeof r&&r){var a=new Date;a.setTime(a.getTime()+1e3*r),r=n.expires=a}r instanceof Date&&(r=r.toUTCString()),null===t&&(t="");var c=e+"="+(t=encodeURIComponent(t));for(var s in c+=";path=/",n){c+="; "+s;var i=n[s];!0!==i&&(c+="="+i)}document.cookie=c}function z(e){P(e,null,{expires:new Date(0)})}function L(e){var t,n=new Date,r=Object(D.a)(n,1);if(Object(A.a)(e,n))t="\u0421\u0435\u0433\u043e\u0434\u043d\u044f";else if(Object(A.a)(e,r))t="\u0412\u0447\u0435\u0440\u0430";else if(Object(F.a)(n,e)<=7){var a=Object(F.a)(n,e)<=5?"\u0434\u043d\u044f":"\u0434\u043d\u0435\u0439";t="".concat(Object(F.a)(n,e)," ").concat(a," \u043d\u0430\u0437\u0430\u0434")}else t=Object(R.a)(e,"dd.MM.yyyy");return t+=", ".concat(Object(R.a)(e,"HH:mm")," i-").concat(Object(R.a)(e,"O"))}var M="https://norma.nomoreparties.space/api",H={isRequest:!1,isFailed:!1,isAuth:!!U("accessToken"),name:"",form:{name:"",email:"",password:""}},J=Object(p.b)("user/register",function(){var e=Object(j.a)(m.a.mark((function e(t,n){var r,a,c,s,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.password,a=t.name,c=t.email,(s=n.dispatch)($()),e.next=5,fetch("".concat(M,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:r,name:a,email:c})});case 5:return i=e.sent,e.next=8,i.json();case 8:(o=e.sent).success?(P("accessToken",o.accessToken.slice(7),{expires:1200}),P("refreshToken",o.refreshToken),s(ee({isAuth:!0})),s(ne({name:o.user.name}))):s(te());case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),G=Object(p.b)("user/login",function(){var e=Object(j.a)(m.a.mark((function e(t,n){var r,a,c,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.password,a=t.email,(c=n.dispatch)($()),e.next=5,fetch("".concat(M,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:r,email:a})});case 5:return s=e.sent,e.next=8,s.json();case 8:(i=e.sent).success?(P("accessToken",i.accessToken.slice(7),{expires:1200}),P("refreshToken",i.refreshToken),c(ee({isAuth:!0})),c(ne({name:i.user.name}))):c(te());case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),K=Object(p.b)("user/logout",function(){var e=Object(j.a)(m.a.mark((function e(t,n){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=n.dispatch)($()),e.next=4,fetch("".concat(M,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:U("refreshToken")})});case 4:return a=e.sent,e.next=7,a.json();case 7:e.sent.success?(z("accessToken"),z("refreshToken"),r(ee({isAuth:!1})),r(ne({name:null}))):r(te());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),W=Object(p.b)("user/token",function(){var e=Object(j.a)(m.a.mark((function e(t,n){var r,a,c,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=n.dispatch)($()),e.next=4,fetch("".concat(M,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:U("refreshToken")})});case 4:return a=e.sent,e.next=7,a.json();case 7:c=e.sent,s=c.accessToken,i=c.refreshToken,c.success?(P("accessToken",s.slice(7),{expires:1200}),P("refreshToken",i),r(ee({isAuth:!0}))):(z("accessToken"),r(ee({isAuth:!1})),r(ne({name:null})),r(te()),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0442\u043e\u043a\u0435\u043d\u0430"));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Z=Object(p.b)("user/updateUserName",function(){var e=Object(j.a)(m.a.mark((function e(t,n){var r,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,e.next=3,fetch("".concat(M,"/auth/user"),{method:"GET",headers:{"Content-Type":"application/json",authorization:"Bearer "+U("accessToken")}});case 3:return a=e.sent,e.next=6,a.json();case 6:(c=e.sent).success&&r(ne({name:c.user.name}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),V=Object(p.b)("user/getUserData",function(){var e=Object(j.a)(m.a.mark((function e(t,n){var r,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,e.next=3,fetch("".concat(M,"/auth/user"),{method:"GET",headers:{"Content-Type":"application/json",authorization:"Bearer "+U("accessToken")}});case 3:return a=e.sent,e.next=6,a.json();case 6:(c=e.sent).success&&(r(re({name:c.user.name,email:c.user.email})),r(ne({name:c.user.name})));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),X=Object(p.b)("user/setUserData",function(){var e=Object(j.a)(m.a.mark((function e(t,n){var r,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,e.next=3,fetch("".concat(M,"/auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json",authorization:"Bearer "+U("accessToken")},body:JSON.stringify(Object(E.a)({},t))});case 3:return a=e.sent,e.next=6,a.json();case 6:(c=e.sent).success?(r(re({name:c.user.name,email:c.user.email})),r(ne({name:c.user.name})),console.log("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")):console.log("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Y=Object(p.c)({name:"user",initialState:H,reducers:{request:function(e){e.isRequest=!0,e.isFailed=!1},success:function(e,t){var n=t.payload.isAuth;e.isRequest=!1,e.isAuth=n},setUserName:function(e,t){var n=t.payload.name;e.name=n},failed:function(e){e.isRequest=!1,e.isFailed=!0},setUserFormData:function(e,t){var n=t.payload,r=n.name,a=n.email;e.form.name=r,e.form.email=a},updateUserFormData:function(e,t){var n=t.payload;for(var r in n)"name"===r||"email"===r||"password"===r?e.form[r]=n[r]:console.log("\u041f\u043e\u043b\u044f ".concat(r," \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 \u0444\u043e\u0440\u043c\u044b"))}},extraReducers:function(e){e.addCase(J.rejected,(function(e,t){console.log(t.error),te()})),e.addCase(G.rejected,(function(e,t){console.log(t.error),te()})),e.addCase(K.rejected,(function(e,t){console.log(t.error),te()})),e.addCase(W.rejected,(function(e,t){z("accessToken"),ee({isAuth:!1}),ne({name:null}),te(),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0442\u043e\u043a\u0435\u043d\u0430")})),e.addCase(Z.rejected,(function(e,t){console.log(t.error)})),e.addCase(V.rejected,(function(e,t){console.log(t.error)})),e.addCase(X.rejected,(function(e,t){console.log(t.error)}))}}),Q=Y.actions,$=Q.request,ee=Q.success,te=Q.failed,ne=Q.setUserName,re=Q.setUserFormData,ae=Q.updateUserFormData,ce=Y.reducer,se=Object(p.c)({name:"ws",initialState:{orders:{},wsConnected:!1},reducers:{wsConnectionStart:function(){},wsConnectionSuccess:function(e){e.wsConnected=!0},wsConnectionClosed:function(e){e.wsConnected=!1},wsConnectionError:function(e){e.wsConnected=!1},wsGetMessage:function(e,t){var n=t.payload;e.orders=n}}}),ie=se.actions,oe=ie.wsConnectionStart,de=ie.wsConnectionSuccess,le=ie.wsConnectionClosed,ue=ie.wsConnectionError,me=ie.wsGetMessage,je=se.reducer,pe=Object(p.c)({name:"wsUser",initialState:{orders:[],wsConnected:!1},reducers:{wsUserConnectionStart:function(){},wsUserConnectionSuccess:function(e){e.wsConnected=!0},wsUserConnectionClosed:function(e){e.wsConnected=!1},wsUserConnectionError:function(e){e.wsConnected=!1},wsUserGetMessage:function(e,t){var n=t.payload;e.orders=n.orders}}}),be=pe.actions,_e=be.wsUserConnectionStart,xe=be.wsUserConnectionSuccess,fe=be.wsUserConnectionClosed,he=be.wsUserConnectionError,Oe=be.wsUserGetMessage,ge=pe.reducer,ve=Object(p.b)("order/createOrder",function(){var e=Object(j.a)(m.a.mark((function e(t,n){var r,a,c,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=n.dispatch)(Ce()),a=t.orderURL,c=t.ingredients,e.next=5,fetch(a,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",authorization:"Bearer "+U("accessToken")},body:JSON.stringify(c)});case 5:return s=e.sent,e.next=8,s.json();case 8:(i=e.sent).success?(r(ke({orderNumber:i.order.number})),r(y())):r(Ie());case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ye=Object(p.c)({name:"order",initialState:{orderNumber:null,orderRequest:!1,orderFailed:!1},reducers:{orderClose:function(e){e.orderNumber=null},orderRequest:function(e){e.orderRequest=!0,e.orderFailed=!1},orderSuccess:function(e,t){var n=t.payload;e.orderRequest=!1,e.orderNumber=n.orderNumber},orderFailed:function(e){e.orderRequest=!1,e.orderFailed=!0}},extraReducers:function(e){e.addCase(ve.rejected,(function(e,t){console.log(t.error),Ie()}))}}),Ne=ye.actions,we=Ne.orderClose,Ce=Ne.orderRequest,ke=Ne.orderSuccess,Ie=Ne.orderFailed,Se={order:ye.reducer,ingredients:N,data:B,user:ce,orders:je,ordersUser:ge},Te=n(5),qe=n(3),Be=n(28),Ee=n.n(Be),De=n(0),Ae=function(){var e=l((function(e){return e.user})),t=e.isAuth,n=e.name,r=t?"profile":"login";return Object(De.jsxs)("header",{className:"".concat(Ee.a.header," mb-10"),children:[Object(De.jsx)("nav",{className:Ee.a["nav-header"],children:Object(De.jsxs)("ul",{className:Ee.a["nav-list"],children:[Object(De.jsx)("li",{className:"pt-4 pr-5 pb-4 pl-5",children:Object(De.jsxs)(Te.c,{to:"/",exact:!0,className:"".concat(Ee.a["nav-item"]),activeClassName:"".concat(Ee.a["nav-item-active"]),children:[Object(De.jsx)(qe.BurgerIcon,{type:"secondary"}),Object(De.jsx)("span",{className:"pl-2 text text_type_main-default text_color_inactive",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})}),Object(De.jsx)("li",{className:"".concat(Ee.a["nav-item"]," pt-4 pr-5 pb-4 pl-5"),children:Object(De.jsxs)(Te.c,{to:"/feed",exact:!0,className:"".concat(Ee.a["nav-item"]),activeClassName:"".concat(Ee.a["nav-item-active"]),children:[Object(De.jsx)(qe.ListIcon,{type:"secondary"}),Object(De.jsx)("span",{className:"pl-2 text text_type_main-default text_color_inactive",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})})]})}),Object(De.jsx)(Te.b,{to:"/",children:Object(De.jsx)(qe.Logo,{})}),Object(De.jsx)("div",{className:"pt-4 pr-5 pb-4 pl-5",children:Object(De.jsxs)(Te.c,{to:"/".concat(r),exact:!0,className:"".concat(Ee.a["header-personal-area"]),activeClassName:"".concat(Ee.a["nav-item-active"]),children:[Object(De.jsx)(qe.ProfileIcon,{type:"secondary"}),Object(De.jsx)("span",{className:"pl-2 text text_type_main-default text_color_inactive",children:n||"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})},Fe=n(108),Re=n.n(Fe),Ue=function(e){return Object(De.jsx)("div",{className:Re.a.overlay,onClick:e.onClick,children:e.children})},Pe=n(87),ze=n.n(Pe),Le=document.getElementById("react-modals"),Me=function(e){var t=e.title,n=e.onClose,r=e.children,c=a.a.useCallback((function(e){"Escape"===e.key&&n()}),[n]);a.a.useEffect((function(){return document.addEventListener("keydown",c),function(){document.removeEventListener("keydown",c)}}),[c]);return s.a.createPortal(Object(De.jsx)(Ue,{onClick:function(e){e.target===e.currentTarget&&n()},children:Object(De.jsxs)("div",{className:"".concat(ze.a.inner," pt-10 pr-10 pb-15 pl-10"),children:[Object(De.jsxs)("div",{className:"".concat(ze.a.header),children:[Object(De.jsx)("h2",{className:"text text_type_main-large mr-9",children:t}),Object(De.jsx)(qe.CloseIcon,{type:"primary",onClick:n})]}),r]})}),Le)},He=n(54),Je=n.n(He),Ge=n.p+"static/media/done.cd07b5c6.png",Ke=function(e){return Object(De.jsxs)("div",{className:"".concat(Je.a.container," mb-15"),children:[Object(De.jsx)("span",{className:"".concat(Je.a.number," mt-4 mb-8 text text_type_digits-large"),children:e.orderNumber}),Object(De.jsx)("span",{className:"mb-15 text text_type_main-medium",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(De.jsx)("img",{src:Ge,alt:"done",className:"mb-15"}),Object(De.jsx)("span",{className:"".concat(Je.a["small-text"]," mb-2 text text_type_main-small"),children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(De.jsx)("span",{className:"".concat(Je.a["small-text"]," mb-2 text text_type_main-small text_color_inactive"),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},We=n(22),Ze=n.n(We),Ve="".concat(M,"/ingredients"),Xe=function(e){var t=e.className,n=e.title,r=d(),a=l((function(e){return e.data})).data,c=Object(i.i)().ingredientId;0===a.length&&r(w(Ve));var s=a.find((function(e){return e._id===c}));return Object(De.jsxs)("div",{className:"".concat(Ze.a.container," ").concat(t),children:[n&&Object(De.jsx)("h2",{className:"text text_type_main-large mr-9",children:n}),s?Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)("img",{alt:s.name,src:s.image_large,className:"mb-4"}),Object(De.jsxs)("div",{className:Ze.a.description,children:[Object(De.jsx)("h3",{className:"".concat(Ze.a.name," text text_type_main-medium mb-8"),children:s.name}),Object(De.jsxs)("ul",{className:"".concat(Ze.a["info-list"]," text_color_inactive"),children:[Object(De.jsxs)("li",{className:"".concat(Ze.a["info-list-item"]),children:[Object(De.jsx)("span",{className:"".concat(Ze.a["nutrition-type-name"]," text text_type_main-small"),children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(De.jsx)("span",{className:"text text_type_digits-default",children:s.calories})]}),Object(De.jsxs)("li",{className:Ze.a["info-list-item"],children:[Object(De.jsx)("span",{className:"".concat(Ze.a["nutrition-type-name"]," text text_type_main-small"),children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(De.jsx)("span",{className:"text text_type_digits-default",children:s.proteins})]}),Object(De.jsxs)("li",{className:Ze.a["info-list-item"],children:[Object(De.jsx)("span",{className:"".concat(Ze.a["nutrition-type-name"]," text text_type_main-small"),children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(De.jsx)("span",{className:"text text_type_digits-default",children:s.fat})]}),Object(De.jsxs)("li",{className:Ze.a["info-list-item"],children:[Object(De.jsx)("span",{className:"".concat(Ze.a["nutrition-type-name"]," text text_type_main-small"),children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(De.jsx)("span",{className:"text text_type_digits-default",children:s.carbohydrates})]})]})]})]}):Object(De.jsx)("span",{className:"text text_type_main-medium mt-10",children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435... "})]})},Ye=n(14),Qe=n(51),$e=n.n(Qe),et=n(62),tt=n.n(et),nt=function(e){var t=e.children,n=e.path,a=Object(r.useState)(!0),c=Object(Ye.a)(a,2),s=c[0],o=c[1],u=U("accessToken"),m=U("refreshToken"),j=d(),p=l((function(e){return e.user})).isRequest;return Object(r.useEffect)((function(){j($()),j(m?W():ee({isAuth:!1}))}),[]),Object(r.useEffect)((function(){!1===p&&o(p)}),[p]),s||p?Object(De.jsx)("div",{className:$e.a.loader_no_offset_top,children:Object(De.jsx)(tt.a,{type:"Oval",color:"#9C64D9",height:100,width:100})}):Object(De.jsx)(i.b,{path:n,render:function(e){var n=e.location;return u&&m?t:Object(De.jsx)(i.a,{to:{pathname:"/login",state:{from:n}}})}})},rt=n(27),at=n.n(rt),ct=n(226),st=n(225),it=n(40),ot=n.n(it),dt=function(e){var t=e.ingredient,n=e.cnt,r=t.image_large,a=t.name,c=t.price,s=Object(st.a)({type:"ingredient",item:{ingredient:t}}),i=Object(Ye.a)(s,2)[1];return Object(De.jsxs)("div",{className:ot.a["burger-ingredient"],ref:i,children:[n?Object(De.jsx)("div",{className:ot.a["burger-ingredient-cnt"],children:Object(De.jsx)(qe.Counter,{count:n,size:"default"})}):null,Object(De.jsx)("img",{src:r,alt:a,className:"".concat(ot.a["burger-ingredient-img"]," pr-4 pl-4")}),Object(De.jsxs)("div",{className:ot.a["burger-ingredient-price"],children:[Object(De.jsx)("span",{className:"text text_type_digits-default",children:c}),Object(De.jsx)(qe.CurrencyIcon,{type:"primary"})]}),Object(De.jsx)("span",{className:"".concat(ot.a["burger-ingredient-name"]," text text_type_main-default"),children:a})]})},lt=a.a.memo(dt),ut=n(35),mt=n.n(ut),jt=function(){var e=d(),t=Object(i.h)(),n=l((function(e){return e.data})),r=n.data,a=n.currentTab,c=l((function(e){return e.ingredients})).qty,s=function(e){var t=document.getElementById("ingredients_list"),n=document.getElementById("".concat(e,"_list"));t&&n&&t.scrollTo(0,n.offsetTop-t.offsetTop)},o=[{title:"\u0411\u0443\u043b\u043a\u0438",data:[],type:"buns"},{title:"\u0421\u043e\u0443\u0441\u044b",data:[],type:"sauces"},{title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",data:[],type:"mains"}],u=0,m=1,j=2;r.forEach((function(e){"bun"===e.type?o[u].data.push(e):"sauce"===e.type?o[m].data.push(e):o[j].data.push(e)}));return Object(De.jsxs)("div",{className:mt.a["burger-ingredients"],children:[Object(De.jsxs)("div",{className:"".concat(mt.a["burger-ingredients-tab"]," mb-10"),children:[Object(De.jsx)(qe.Tab,{value:"buns",active:"buns"===a,onClick:s,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(De.jsx)(qe.Tab,{value:"sauces",active:"sauces"===a,onClick:s,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(De.jsx)(qe.Tab,{value:"mains",active:"mains"===a,onClick:s,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(De.jsx)("ul",{className:mt.a["burger-ingredients-type-list"],onScroll:function(t){var n,r,a=t.target,c=a.getBoundingClientRect().y,s=null===(n=a.querySelector("#sauces_list"))||void 0===n?void 0:n.getBoundingClientRect().y,i=null===(r=a.querySelector("#mains_list"))||void 0===r?void 0:r.getBoundingClientRect().y;i&&s&&e(q(i-c<=0?{tab:"mains"}:s-c<=0?{tab:"sauces"}:{tab:"buns"}))},id:"ingredients_list",children:o.map((function(e){return Object(De.jsxs)("li",{className:mt.a["burger-ingredients-type-item"],id:"".concat(e.type,"_list"),children:[Object(De.jsx)("h2",{className:"text text_type_main-medium",children:e.title}),Object(De.jsx)("ul",{className:"".concat(mt.a["burger-ingredients-list"]," pl-4 pr-4"),children:e.data.map((function(e){return Object(De.jsx)("li",{className:"".concat(mt.a["burger-ingredients-item"]," mb-2"),children:Object(De.jsx)(Te.b,{to:{pathname:"/ingredients/".concat(e._id),state:{background:t}},children:Object(De.jsx)(lt,{ingredient:e,cnt:(n=e,c[n._id]?c[n._id]:0)})})},e._id);var n}))})]},e.title)}))})]})},pt=n(89),bt=n.n(pt),_t=function(e){var t,n=Object(i.g)(),a=Object(i.h)(),c=e.ingredient,s=e.index,d=e.moveComponent,l=c.name,u=c.price,m=c.image,j=Object(r.useRef)(null),p=Object(ct.a)({accept:"ingredientMove",hover:function(e,t){var n;if(j.current){var r=e.index,a=s;if(r!==a){var c=null===(n=j.current)||void 0===n?void 0:n.getBoundingClientRect(),i=(c.bottom-c.top)/2,o=t.getClientOffset(),l=null===o?0:o.y-c.top;r<a&&l<i||r>a&&l>i||(d(r,a),e.index=a)}}}}),b=Object(Ye.a)(p,2)[1],_=Object(o.b)(),x=Object(st.a)({type:"ingredientMove",item:function(){return{index:s}}});return(0,Object(Ye.a)(x,2)[1])(b(j)),Object(De.jsxs)("div",{className:bt.a["burger-constructor-list-item"],ref:j,children:[Object(De.jsx)(qe.DragIcon,{type:"primary"}),Object(De.jsx)("div",{className:bt.a["burger-constructor-list-item-inner"],onClick:(t=c._id,function(){n.push({pathname:"/ingredients/".concat(t),state:{background:a}})}),children:Object(De.jsx)(qe.ConstructorElement,{text:l,price:u,thumbnail:m,handleClose:function(e){return function(){_(g({index:e}))}}(s)})})]})},xt=n(55),ft=n.n(xt),ht="".concat(M,"/orders"),Ot=function(){var e=d(),t=Object(i.g)(),n=Object(i.h)(),a=l((function(e){return e.ingredients})),c=a.bun,s=a.components,o=l((function(e){return e.user})).isAuth,u=(s.length?s.reduce((function(e,t){return e+t.ingredient.price}),0):0)+(c?2*c.price:0),p=function(){var n=Object(j.a)(m.a.mark((function n(){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o){n.next=3;break}return t.push("/login"),n.abrupt("return");case 3:if(null!==c){n.next=6;break}return console.log("\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c \u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0441 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0439 \u0431\u0443\u043b\u043a\u043e\u0439"),n.abrupt("return");case 6:r={ingredients:[c._id]},s.forEach((function(e){r.ingredients.push(e.ingredient._id)})),r.ingredients.push(c._id),e(ve({orderURL:ht,ingredients:r}));case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),b=Object(r.useCallback)((function(t,n){e(v({fromIndex:t,toIndex:n}))}),[e]);return Object(De.jsxs)("div",{className:"".concat(ft.a["burger-constructor"]," pl-4 pb-15"),children:[c&&Object(De.jsx)(Te.b,{to:{pathname:"/ingredients/".concat(c._id),state:{background:n}},children:Object(De.jsx)("div",{className:"pl-8",children:Object(De.jsx)(qe.ConstructorElement,{text:"".concat(c.name," (\u0432\u0435\u0440\u0445)"),price:c.price,thumbnail:c.image,isLocked:!0,type:"top"})})}),Object(De.jsx)("ul",{className:"".concat(ft.a["burger-constructor-list"]," pr-2"),children:s.map((function(e,t){return Object(De.jsx)("li",{children:Object(De.jsx)(_t,{ingredient:e.ingredient,index:t,moveComponent:b})},e.id)}))}),c&&Object(De.jsx)("div",{className:"pl-8 mb-10",children:Object(De.jsx)(Te.b,{to:{pathname:"/ingredients/".concat(c._id),state:{background:n}},children:Object(De.jsx)(qe.ConstructorElement,{text:"".concat(c.name," (\u043d\u0438\u0437)"),price:c.price,thumbnail:c.image,isLocked:!0,type:"bottom"})})}),Object(De.jsxs)("div",{className:"".concat(ft.a["burger-constructor-summary-and-offer-btn"]," pr-4"),children:[Object(De.jsxs)("div",{className:"".concat(ft.a["burger-constructor-summary"]," mr-10"),children:[Object(De.jsx)("p",{className:"text text_type_digits-medium mr-2",children:u}),Object(De.jsx)(qe.CurrencyIcon,{type:"primary"})]}),c&&Object(De.jsx)(qe.Button,{type:"primary",size:"large",onClick:p,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c"})]})]})},gt=n(56),vt=n.n(gt),yt="".concat(M,"/ingredients"),Nt=function(){var e=d(),t=l((function(e){return e.data})),n=t.data,r=t.dataRequest,c=t.dataFailed;a.a.useEffect((function(){0===n.length&&e(w(yt))}),[e,n.length]);var s=Object(ct.a)({accept:"ingredient",drop:function(t){e(O(t))}}),i=Object(Ye.a)(s,2)[1];return Object(De.jsx)("section",{className:"".concat(vt.a["section-make-burger"]," mb-10"),children:r?Object(De.jsx)("span",{className:"text text_type_main-medium",children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b..."}):c?Object(De.jsx)("span",{className:"text text_type_main-medium",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 :( "}):n.length?Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)("h1",{className:"text text_type_main-large mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(De.jsxs)("ul",{className:vt.a["section-make-burger-list"],children:[Object(De.jsx)("li",{className:"".concat(vt.a["section-make-burger-item"]," mr-10"),children:Object(De.jsx)(jt,{})}),Object(De.jsx)("li",{className:vt.a["section-make-burger-item"],ref:i,children:Object(De.jsx)(Ot,{})})]})]}):Object(De.jsx)("span",{className:"text text_type_main-medium",children:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435\u0442 \u0432 \u043c\u0435\u043d\u044e :("})})},wt=function(){var e=Object(i.h)(),t=Object(i.i)().orderId,n=l((function(e){return e.orders})),r=l((function(e){return e.ordersUser})),c=d(),s=l((function(e){return e.data})).data;if(!t){var o=Object(i.f)(e.pathname,{path:"/profile/orders/:orderId",exact:!0,strict:!1});o&&(t=o.params.orderId)}var u=e.pathname.indexOf("profile")>=0?r.orders:n.orders.orders;if(a.a.useEffect((function(){0===s.length&&c(w(yt)),u&&0!==u.length||(e.pathname.indexOf("profile")>=0?c(_e()):c(oe()))}),[c,s.length,u,e.pathname]),!u||0===u.length||!s)return Object(De.jsx)("div",{className:at.a.wrapper,children:Object(De.jsx)("span",{className:"text text_type_main-large",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})});var m=u.find((function(e){return e._id===t})),j={};if(!m)return Object(De.jsx)("div",{className:at.a.wrapper,children:Object(De.jsx)("span",{className:"text text_type_main-large",children:"\u0417\u0430\u043a\u0430\u0437 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"})});m.ingredients.forEach((function(e){j[e]?j[e].qty+=1:j[e]={qty:1}}));var p=0,b=function(e){var t=s.find((function(t){return t._id===e}));if(t){var n=t.name,r=t.image_mobile,a=t.price;j[e].name=n,j[e].img=r,j[e].price=a,p+=a*j[e].qty}};for(var _ in j)b(_);return Object(De.jsxs)("div",{className:at.a.wrapper,children:[Object(De.jsxs)("p",{className:"text text_type_digits-default mb-10 ".concat(at.a.align_center),children:["#",m.number]}),Object(De.jsx)("p",{className:"text text_type_main-medium mb-3",children:m.name}),function(e){var t={},n="";switch(e){case"created":n="\u0421\u043e\u0437\u0434\u0430\u043d";break;case"pending":n="\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f";break;case"done":n="\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",t.color="#00CCCC"}return Object(De.jsx)("p",{className:"text text_type_main-default mb-15",style:t,children:n})}(m.status),Object(De.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(De.jsx)("ul",{className:"".concat(at.a.composition," mb-10 pr-6"),children:function(e){var t=[];for(var n in e)t.push(Object(De.jsxs)("li",{className:at.a.ingredient_info,children:[Object(De.jsxs)("div",{className:at.a.ingredient_icon_name,children:[Object(De.jsx)("img",{className:"".concat(at.a.ingredient_icon," mr-4"),src:e[n].img,alt:""}),Object(De.jsx)("span",{className:"text text_type_main-default",children:e[n].name})]}),Object(De.jsxs)("div",{className:at.a.ingredient_qty_price,children:[Object(De.jsx)("span",{className:"text text_type_digits-default",children:e[n].qty}),Object(De.jsx)("span",{className:"text text_type_main-default mr-2 ml-2",children:"x"}),Object(De.jsx)("span",{className:"text text_type_digits-default mr-2",children:e[n].price}),Object(De.jsx)(qe.CurrencyIcon,{type:"primary"})]})]},n));return t}(j)}),Object(De.jsxs)("div",{className:at.a.time_total,children:[Object(De.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:L(new Date(m.createdAt))}),Object(De.jsxs)("div",{className:at.a.total,children:[Object(De.jsx)("span",{className:"text text_type_digits-default mr-2",children:p}),Object(De.jsx)(qe.CurrencyIcon,{type:"primary"})]})]})]})},Ct=n(32),kt=n(41),It=n.n(kt),St=function(){var e=Object(r.useState)({email:"",password:""}),t=Object(Ye.a)(e,2),n=t[0],a=t[1],c=d(),s=l((function(e){return e.user})).isAuth,o=Object(i.h)().state,u=function(e){var t=e.target;a(Object(E.a)(Object(E.a)({},n),{},Object(Ct.a)({},t.name,t.value)))};if(s)return Object(De.jsx)(i.a,{to:o&&o.from||"/"});return Object(De.jsx)("div",{className:"".concat(It.a.container," mt-15"),children:Object(De.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c(G(Object(E.a)({},n)))},children:[Object(De.jsx)("h2",{className:"text text_type_main-medium mt-30 mb-6",children:"\u0412\u0445\u043e\u0434"}),Object(De.jsx)("div",{className:"".concat(It.a.wrapper," mb-6"),children:Object(De.jsx)(qe.EmailInput,{name:"email",size:"default",value:n.email,onChange:u})}),Object(De.jsx)("div",{className:"".concat(It.a.wrapper," mb-6"),children:Object(De.jsx)(qe.PasswordInput,{name:"password",size:"default",value:n.password,onChange:u})}),Object(De.jsx)(qe.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(De.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20 mb-4",children:["\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? ",Object(De.jsx)(Te.b,{to:"/register",className:It.a.link,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(De.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(De.jsx)(Te.b,{to:"/forgot-password",className:It.a.link,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})})},Tt=n(42),qt=n.n(Tt),Bt=function(){var e=Object(r.useState)({name:"",email:"",password:""}),t=Object(Ye.a)(e,2),n=t[0],a=t[1],c=d(),s=function(e){var t=e.target;a(Object(E.a)(Object(E.a)({},n),{},Object(Ct.a)({},t.name,t.value)))};if(l((function(e){return e.user})).isAuth)return Object(De.jsx)(i.a,{to:{pathname:"/"}});return Object(De.jsx)("div",{className:"".concat(qt.a.container," mt-15"),children:Object(De.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c(J(Object(E.a)({},n)))},children:[Object(De.jsx)("h2",{className:"text text_type_main-medium mt-30 mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(De.jsx)("div",{className:"".concat(qt.a.wrapper," mb-6"),children:Object(De.jsx)(qe.Input,{type:"text",placeholder:"\u0418\u043c\u044f",name:"name",error:!1,value:n.name,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",onChange:s})}),Object(De.jsx)("div",{className:"".concat(qt.a.wrapper," mb-6"),children:Object(De.jsx)(qe.EmailInput,{name:"email",size:"default",value:n.email,onChange:s})}),Object(De.jsx)("div",{className:"".concat(qt.a.wrapper," mb-6"),children:Object(De.jsx)(qe.PasswordInput,{name:"password",size:"default",value:n.password,onChange:s})}),Object(De.jsx)(qe.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(De.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20 mb-4",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(De.jsx)(Te.b,{to:"/login",className:qt.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},Et=n(66),Dt=n.n(Et),At=function(){var e=Object(r.useState)(""),t=Object(Ye.a)(e,2),n=t[0],a=t[1],c=l((function(e){return e.user})).isAuth,s=Object(i.g)(),o=Object(i.h)();if(c)return Object(De.jsx)(i.a,{to:"/"});return Object(De.jsx)("div",{className:"".concat(Dt.a.container," mt-15"),children:Object(De.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("".concat(M,"/password-reset"),{method:"POST",body:JSON.stringify({email:n})}).then((function(e){return e.json()})).then((function(e){e.success&&s.replace("/reset-password",{from:o})})).catch((function(e){console.log(e)}))},children:[Object(De.jsx)("h2",{className:"text text_type_main-medium mt-30 mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(De.jsx)("div",{className:"".concat(Dt.a.wrapper," mb-6"),children:Object(De.jsx)(qe.EmailInput,{name:"email",size:"default",value:n,onChange:function(e){var t=e.target;a(t.value)}})}),Object(De.jsx)(qe.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(De.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(De.jsx)(Te.b,{to:"/login",className:Dt.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},Ft=n(57),Rt=n.n(Ft),Ut=function(){var e=Object(r.useState)(""),t=Object(Ye.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(Ye.a)(c,2),o=s[0],d=s[1],u=l((function(e){return e.user})).isAuth,p=Object(i.g)(),b=Object(i.h)();if(u)return Object(De.jsx)(i.a,{to:"/"});if(!b.state||b.state&&b.state.from&&"/forgot-password"!==b.state.from.pathname)return Object(De.jsx)(i.a,{to:"/forgot-password"});var _=function(){var e=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),fetch("".concat(M,"/password-reset/reset"),{method:"POST",body:JSON.stringify({password:n,token:o})}).then((function(e){return e.json()})).then((function(e){e.success?(console.log(e.message),p.replace("/login")):e.message&&console.log(e.message)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(De.jsx)("div",{className:"".concat(Rt.a.container," mt-15"),children:Object(De.jsxs)("form",{onSubmit:_,children:[Object(De.jsx)("h2",{className:"text text_type_main-medium mt-30 mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(De.jsx)("div",{className:"".concat(Rt.a.wrapper," mb-6"),children:Object(De.jsx)(qe.PasswordInput,{name:"password",size:"default",value:n,onChange:function(e){var t=e.target;a(t.value)}})}),Object(De.jsx)("div",{className:"".concat(Rt.a.wrapper," mb-6"),children:Object(De.jsx)(qe.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",name:"token",value:o,error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",onChange:function(e){var t=e.target;d(t.value)},size:"default"})}),Object(De.jsx)(qe.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(De.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(De.jsx)(Te.b,{to:"/login",className:Rt.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},Pt=n(43),zt=n.n(Pt),Lt=function(){var e=l((function(e){return e.user.form})),t={name:e.name,email:e.email,password:e.password},n=d();Object(r.useEffect)((function(){n(V())}),[n]);var a=function(e){var t=e.target;"name"!==t.name&&"email"!==t.name&&"password"!==t.name||n(ae(Object(Ct.a)({},t.name,t.value)))},c=function(){var e=Object(j.a)(m.a.mark((function e(r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),n(X(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(De.jsxs)("form",{className:"".concat(zt.a.form," mt-20 pb-20"),onSubmit:c,children:[Object(De.jsx)("div",{className:zt.a.input_wrapper,children:Object(De.jsx)(qe.Input,{value:t.name,onChange:a,name:"name",type:"text",placeholder:"\u0418\u043c\u044f"})}),Object(De.jsx)("div",{className:zt.a.input_wrapper,children:Object(De.jsx)(qe.EmailInput,{value:t.email,name:"email",onChange:a})}),Object(De.jsx)("div",{className:zt.a.input_wrapper,children:Object(De.jsx)(qe.PasswordInput,{value:t.password,name:"password",onChange:a})}),Object(De.jsxs)("div",{className:zt.a.buttons_wrapper,children:[Object(De.jsx)(qe.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(De.jsx)(qe.Button,{type:"secondary",size:"medium",onClick:function(e){e.preventDefault(),n(V())},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})},Mt=n(33),Ht=n.n(Mt),Jt=n(30),Gt=n.n(Jt),Kt=function(e){var t=e.order,n=e.showStatus,r=void 0!==n&&n,a=t.ingredients,c=t.status,s=t.number,i=t.name,o=t.createdAt,d=l((function(e){return e.data})).data;if(0===d.length)return Object(De.jsx)("div",{className:"text text_type_main-medium",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."});var u=0,m=[],j=a.length>6,p=a.length-6;a.slice(0,6).forEach((function(e){var t=d.find((function(t){return t._id===e}));t?(u+=t.price,m.push(t.image_mobile)):console.log("\u041e\u0448\u0438\u0431\u043a\u0430. \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d")}));return Object(De.jsxs)("div",{className:"".concat(Gt.a.order," mr-3 p-6"),children:[Object(De.jsxs)("div",{className:"".concat(Gt.a.order_number_date," mb-6"),children:[Object(De.jsxs)("span",{className:"text text_type_main-default",children:["#",s]}),Object(De.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:L(new Date(o))})]}),Object(De.jsx)("p",{className:"text text_type_main-medium ".concat(r?"mb-2":"mb-6"),children:i}),r&&function(e){var t={},n="";switch(e){case"created":n="\u0421\u043e\u0437\u0434\u0430\u043d";break;case"pending":n="\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f";break;case"done":n="\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",t.color="#00CCCC"}return Object(De.jsx)("p",{className:"text text_type_main-default mb-6",style:t,children:n})}(c),Object(De.jsxs)("div",{className:Gt.a.order_components_total,children:[Object(De.jsxs)("div",{className:Gt.a.order_icons,children:[m.map((function(e,t){return Object(De.jsx)("img",{className:"".concat(Gt.a.order_component_icon," ").concat(5===t&&j&&Gt.a.order_component_icon_more),src:e,style:{zIndex:10-t},alt:""},t)})),j&&Object(De.jsxs)("div",{className:"text text_type_main-default ".concat(Gt.a.more_items),children:["+",p]})]}),Object(De.jsxs)("div",{className:Gt.a.order_total,children:[Object(De.jsx)("p",{className:"text text_type_digits-default mr-2",children:u}),Object(De.jsx)(qe.CurrencyIcon,{type:"primary"})]})]})]})},Wt=n(110),Zt=n.n(Wt),Vt=function(e){var t=e.orderList,n=e.showStatus,r=d(),c=l((function(e){return e.data})),s=c.data,o=c.dataRequest,u=Object(i.h)();return a.a.useEffect((function(){0===s.length&&r(w(yt))}),[r,s.length]),Object(De.jsx)(De.Fragment,{children:o?Object(De.jsx)("div",{className:"text text_type_main-large",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):Object(De.jsx)("ul",{className:Zt.a.order_list,children:t.map((function(e){return Object(De.jsx)("li",{children:Object(De.jsx)(Te.b,{to:{pathname:"".concat(u.pathname,"/").concat(e._id),state:{background:u}},children:Object(De.jsx)(Kt,{order:e,showStatus:n},e._id)})},e._id)}))})})},Xt=function(){var e=d(),t=l((function(e){return e.user})).isAuth,n=Object(i.h)(),a=Object(i.g)(),c=l((function(e){return e.ordersUser})),s=c.orders,o=c.wsConnected;Object(r.useEffect)((function(){o||e(_e())}),[o,e]);if(!t)return Object(De.jsx)(i.a,{to:"/login"});var u="PUSH"===a.action&&n.state&&n.state.background;return Object(De.jsxs)("ul",{className:"".concat(Ht.a.wrapper," mt-10"),children:[Object(De.jsxs)(i.d,{location:u||n,children:[Object(De.jsx)(i.b,{path:"/profile/orders/:orderId",exact:!0,children:Object(De.jsx)(wt,{})}),Object(De.jsxs)(i.b,{path:"/",children:[Object(De.jsxs)("li",{className:"".concat(Ht.a.left_panel," mt-20"),children:[Object(De.jsxs)("ul",{className:"pb-20",children:[Object(De.jsx)("li",{className:Ht.a.nav_link,children:Object(De.jsx)(Te.c,{to:"/profile",exact:!0,className:"text text_type_main-medium text_color_inactive",activeStyle:{color:"white"},children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(De.jsx)("li",{className:Ht.a.nav_link,children:Object(De.jsx)(Te.c,{to:"/profile/orders",className:"text text_type_main-medium text_color_inactive",activeStyle:{color:"white"},children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(De.jsx)("li",{className:Ht.a.nav_link,children:Object(De.jsx)("button",{className:"text text_type_main-medium text_color_inactive",onClick:function(){e(K())},children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(De.jsx)("p",{className:"".concat(Ht.a.description," text text_type_main-default text_color_inactive"),children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(De.jsx)("li",{className:"".concat(Ht.a.right_panel," mb-5"),children:Object(De.jsxs)(i.d,{location:u||n,children:[Object(De.jsx)(i.b,{path:"/profile",exact:!0,children:Object(De.jsx)(Lt,{})}),Object(De.jsx)(i.b,{path:"/profile/orders",exact:!0,children:Object(De.jsx)(Vt,{orderList:s,showStatus:!0})})]})})]})]}),u&&Object(De.jsx)(Me,{title:"\u0417\u0430\u043a\u0430\u0437",onClose:function(){a.push("/profile/orders")},children:Object(De.jsx)(wt,{})})]})},Yt=n(111),Qt=n.n(Yt),$t=function(){return Object(De.jsxs)("div",{className:Qt.a.wrapper,children:[Object(De.jsx)("h1",{className:"text text_type_main-large",children:"\u0423\u043f\u0441! \u041e\u0448\u0438\u0431\u043a\u0430 404"}),Object(De.jsx)("p",{className:"text text_type_main-medium text_color_inactive",children:"\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"}),Object(De.jsx)("br",{}),Object(De.jsx)("br",{}),Object(De.jsxs)("p",{className:"text text_type_main-small",children:["\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u0438\u043b\u0438 \u0432\u0435\u0440\u043d\u0438\u0442\u0435\u0441\u044c \u043d\u0430 ",Object(De.jsx)(Te.b,{to:"/",className:"text_color_inactive",children:"\u0434\u043e\u043c\u0430\u0448\u043d\u044e\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"})]})]})},en=n(17),tn=n.n(en),nn=function(){var e=d(),t=l((function(e){return e.orders})),n=t.orders,a=t.wsConnected;Object(r.useEffect)((function(){a||e(oe())}),[a,e]);var c=n.total,s=n.totalToday,i=n.orders||[],o={done:[],pending:[]};return i.forEach((function(e){"done"!==e.status&&"pending"!==e.status||o[e.status].push(e.number)})),Object(De.jsxs)("div",{className:"".concat(tn.a.wrapper," mb-5"),children:[Object(De.jsx)("h1",{className:"text text_type_main-large mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(De.jsxs)("section",{className:tn.a.feed_wrapper,children:[Object(De.jsx)("div",{className:tn.a.feed_inner,children:Object(De.jsx)(Vt,{orderList:i,showStatus:!1})}),Object(De.jsxs)("div",{className:tn.a.feed_inner,children:[Object(De.jsxs)("ul",{className:"".concat(tn.a.feed_order_status),children:[Object(De.jsxs)("li",{className:tn.a.feed_order_status_type,children:[Object(De.jsx)("h2",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(De.jsx)("ul",{className:tn.a.feed_order_status_type_list,children:o.done.map((function(e){return Object(De.jsx)("li",{className:"text text_type_digits-default ".concat(tn.a.feed_order_cyan_colored),children:e},e)}))})]}),Object(De.jsxs)("li",{className:tn.a.feed_order_status_type,children:[Object(De.jsx)("h2",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(De.jsx)("ul",{className:tn.a.feed_order_status_type_list,children:o.pending.map((function(e){return Object(De.jsx)("li",{className:"text text_type_digits-default",children:e},e)}))})]})]}),Object(De.jsx)("p",{className:"text text_type_main-medium ".concat(tn.a.text_shadow),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(De.jsx)("p",{className:"text text_type_digits-large mb-15 ".concat(tn.a.text_shadow),children:c}),Object(De.jsx)("p",{className:"text text_type_main-medium ".concat(tn.a.text_shadow),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(De.jsx)("p",{className:"text text_type_digits-large ".concat(tn.a.text_shadow),children:s})]})]})]})},rn=function(){var e=d(),t=Object(i.g)(),n=Object(i.h)(),a=l((function(e){return e.order})),c=a.orderRequest,s=a.orderFailed,o=a.orderNumber,u=l((function(e){return e.user})),m=u.isAuth,j=u.name;Object(r.useEffect)((function(){m&&!j&&e(Z())}),[e,m,j]);var p="PUSH"===t.action&&n.state&&n.state.background;return Object(De.jsxs)("div",{className:$e.a.wrapper,children:[Object(De.jsx)(Ae,{}),Object(De.jsx)("main",{children:Object(De.jsxs)(i.d,{location:p||n,children:[Object(De.jsx)(i.b,{path:"/",exact:!0,children:Object(De.jsx)(Nt,{})}),Object(De.jsx)(i.b,{path:"/login",exact:!0,children:Object(De.jsx)(St,{})}),Object(De.jsx)(i.b,{path:"/register",exact:!0,children:Object(De.jsx)(Bt,{})}),Object(De.jsx)(i.b,{path:"/forgot-password",exact:!0,children:Object(De.jsx)(At,{})}),Object(De.jsx)(i.b,{path:"/reset-password",exact:!0,children:Object(De.jsx)(Ut,{})}),Object(De.jsx)(nt,{path:"/profile",children:Object(De.jsx)(Xt,{})}),Object(De.jsx)(i.b,{path:"/ingredients/:ingredientId",children:Object(De.jsx)(Xe,{className:"mt-30",title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"})}),Object(De.jsx)(i.b,{path:"/feed",exact:!0,children:Object(De.jsx)(nn,{})}),Object(De.jsx)(i.b,{path:"/feed/:orderId",exact:!0,children:Object(De.jsx)(wt,{className:"mt-30"})}),Object(De.jsx)(i.b,{children:Object(De.jsx)($t,{})})]})}),p&&Object(De.jsxs)(i.d,{children:[Object(De.jsx)(i.b,{path:"/ingredients/:ingredientId",exact:!0,children:Object(De.jsx)(Me,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",onClose:function(){t.push("/")},children:Object(De.jsx)(Xe,{})})}),Object(De.jsx)(i.b,{path:"/feed/:orderId",exact:!0,children:Object(De.jsx)(Me,{title:"\u0417\u0430\u043a\u0430\u0437",onClose:function(){t.push("/feed")},children:Object(De.jsx)(wt,{})})})]}),c&&Object(De.jsx)("div",{className:$e.a.loader,children:Object(De.jsx)(tt.a,{type:"Oval",color:"#9C64D9",height:200,width:200})}),o&&!c&&Object(De.jsx)(Me,{title:"",onClose:function(){e(we())},children:s?Object(De.jsx)("span",{className:"text text_type_main-medium",children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."}):Object(De.jsx)(Ke,{orderNumber:o})})]})},an=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,229)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},cn=n(223),sn=n(112),on=n(49),dn=n(114),ln=["success"],un=function(e,t,n){var r=n.checkToken;return function(n){var a=null;return function(c){return function(s){var i=n.dispatch,o=t.wsConnectionStart,d=t.wsConnectionSuccess,l=t.wsConnectionClosed,u=t.wsConnectionError,m=t.wsGetMessage;o.match(s)&&(a=new WebSocket("".concat(e).concat(r?"?token="+U("accessToken"):""))),a&&(a.onopen=function(){i(d({}))},a.onerror=function(){i(u({}))},a.onmessage=function(e){var t=e.data,n=JSON.parse(t),r=(n.success,Object(dn.a)(n,ln));i(m(r))},a.onclose=function(){i(l({}))}),c(s)}}}},mn=Object(p.a)({reducer:Se,middleware:function(e){return e().concat(on.a).concat(un("wss://norma.nomoreparties.space/orders/all",{wsConnectionStart:oe,wsConnectionSuccess:de,wsConnectionClosed:le,wsConnectionError:ue,wsGetMessage:me},{checkToken:!1})).concat(un("wss://norma.nomoreparties.space/orders",{wsConnectionStart:_e,wsConnectionSuccess:xe,wsConnectionClosed:fe,wsConnectionError:he,wsGetMessage:Oe},{checkToken:!0}))},devTools:!1});s.a.render(Object(De.jsx)(a.a.StrictMode,{children:Object(De.jsx)(o.a,{store:mn,children:Object(De.jsx)(cn.a,{backend:sn.a,children:Object(De.jsx)(Te.a,{children:Object(De.jsx)(rn,{})})})})}),document.getElementById("root")),an()},22:function(e,t,n){e.exports={container:"IngredientDetails_container__2nnnN",description:"IngredientDetails_description__1qgMP",name:"IngredientDetails_name__2Yrbr","info-list":"IngredientDetails_info-list__3Bc1z","info-list-item":"IngredientDetails_info-list-item__2W67P","nutrition-type-name":"IngredientDetails_nutrition-type-name__12XoJ"}},27:function(e,t,n){e.exports={wrapper:"OrderInfo_wrapper__HIFyy",align_center:"OrderInfo_align_center__2ujBS",cyan_color:"OrderInfo_cyan_color__1L1bs",composition:"OrderInfo_composition__3s0pn",ingredient_info:"OrderInfo_ingredient_info__28LA_",ingredient_icon_name:"OrderInfo_ingredient_icon_name__2HpcM",ingredient_icon:"OrderInfo_ingredient_icon__1L5FD",ingredient_qty_price:"OrderInfo_ingredient_qty_price__9lvCg",time_total:"OrderInfo_time_total__2SjBu",total:"OrderInfo_total__2FMko"}},28:function(e,t,n){e.exports={header:"AppHeader_header__1qooX","nav-header":"AppHeader_nav-header__39zfP","nav-list":"AppHeader_nav-list__27bZC","nav-item":"AppHeader_nav-item__80qAG","nav-item-active":"AppHeader_nav-item-active__274z6","header-personal-area":"AppHeader_header-personal-area__3bcPI"}},30:function(e,t,n){e.exports={order:"OrderListItem_order__vjVlP",order_number_date:"OrderListItem_order_number_date__1bm2i",order_components_total:"OrderListItem_order_components_total__2tKRF",order_total:"OrderListItem_order_total__17EGc",order_icons:"OrderListItem_order_icons__2YtPK",order_component_icon:"OrderListItem_order_component_icon__1KAbn",order_component_icon_more:"OrderListItem_order_component_icon_more__3bZip",more_items:"OrderListItem_more_items__36vj_"}},33:function(e,t,n){e.exports={wrapper:"profile_wrapper__1RIYZ",left_panel:"profile_left_panel___VosU",right_panel:"profile_right_panel__2dpqB",nav_link:"profile_nav_link__1u0TF",description:"profile_description__3-1tk"}},35:function(e,t,n){e.exports={"burger-ingredients":"BurgerIngredients_burger-ingredients__1sp_z","burger-ingredients-tab":"BurgerIngredients_burger-ingredients-tab__1dsj3","burger-ingredients-type-list":"BurgerIngredients_burger-ingredients-type-list__3c587","burger-ingredients-type-item":"BurgerIngredients_burger-ingredients-type-item__1h2C7","burger-ingredients-list":"BurgerIngredients_burger-ingredients-list__3qgEi","burger-ingredients-item":"BurgerIngredients_burger-ingredients-item__5lrZs"}},40:function(e,t,n){e.exports={"burger-ingredient":"BurgerIngredient_burger-ingredient__1sx7O","burger-ingredient-cnt":"BurgerIngredient_burger-ingredient-cnt__38M82","burger-ingredient-img":"BurgerIngredient_burger-ingredient-img__eTPwi","burger-ingredient-price":"BurgerIngredient_burger-ingredient-price__6AwWl","burger-ingredient-name":"BurgerIngredient_burger-ingredient-name__1mDU8"}},41:function(e,t,n){e.exports={container:"login_container__29a-_",wrapper:"login_wrapper__34HHk",link:"login_link__2SSU9"}},42:function(e,t,n){e.exports={container:"register_container__36gKf",wrapper:"register_wrapper__Ns7zG",link:"register_link__W0QKo"}},43:function(e,t,n){e.exports={form:"ProfileForm_form__1GdsD",input_wrapper:"ProfileForm_input_wrapper__1JSm4",buttons_wrapper:"ProfileForm_buttons_wrapper__15zaM"}},51:function(e,t,n){e.exports={wrapper:"App_wrapper__3ajZr",loader:"App_loader__20FVw",loader_no_offset_top:"App_loader_no_offset_top__2nnK9"}},54:function(e,t,n){e.exports={container:"OrderDetails_container__q2XTd",number:"OrderDetails_number__3p402","small-text":"OrderDetails_small-text__DwPZj"}},55:function(e,t,n){e.exports={"burger-constructor":"BurgerConstructor_burger-constructor__1Jp-a","burger-constructor-list":"BurgerConstructor_burger-constructor-list__1nRJb","burger-constructor-summary-and-offer-btn":"BurgerConstructor_burger-constructor-summary-and-offer-btn__1ktxC","burger-constructor-summary":"BurgerConstructor_burger-constructor-summary__1CbkW"}},56:function(e,t,n){e.exports={"section-make-burger":"home_section-make-burger__2slKp","section-make-burger-list":"home_section-make-burger-list__2HaU9","section-make-burger-item":"home_section-make-burger-item__3uWru"}},57:function(e,t,n){e.exports={container:"reset_password_container__Laq4u",wrapper:"reset_password_wrapper__1oCOS",link:"reset_password_link__S4KZD"}},66:function(e,t,n){e.exports={container:"forgot_password_container__3IQgW",wrapper:"forgot_password_wrapper__XWdth",link:"forgot_password_link__2VXa3"}},87:function(e,t,n){e.exports={inner:"Modal_inner__f99lF",header:"Modal_header__wBDdw"}},89:function(e,t,n){e.exports={"burger-constructor-list-item":"BurgerConstructorItem_burger-constructor-list-item__tqS1H","burger-constructor-list-item-inner":"BurgerConstructorItem_burger-constructor-list-item-inner__2K8zV"}}},[[216,1,2]]]);
//# sourceMappingURL=main.84f43197.chunk.js.map